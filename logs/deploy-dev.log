Deploying to dev using fly.dev.toml...
==> Verifying app config
Validating fly.dev.toml
[32mâœ“[0m Configuration is valid
--> Verified app config
==> Building image
Waiting for depot builder...

==> Building image with Depot
--> build:  (â€‹)
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 67B 0.1s
#1 transferring dockerfile: 3.42kB 0.3s done
#1 DONE 0.3s

#2 resolve image config for docker-image://docker.io/docker/dockerfile:1
#2 DONE 0.3s

#3 docker-image://docker.io/docker/dockerfile:1@sha256:38387523653efa0039f8e1c89bb74a30504e76ee9f565e25c9a09841f9427b05
#3 resolve docker.io/docker/dockerfile:1@sha256:38387523653efa0039f8e1c89bb74a30504e76ee9f565e25c9a09841f9427b05 done
#3 CACHED

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 3.42kB 0.3s done
#1 DONE 0.3s

#4 [internal] load build definition from Dockerfile
#4 Deduplicating step ID [internal] load build definition from Dockerfile, another build is calculating it done
#4 DONE 0.0s

#5 [internal] load metadata for docker.io/hexpm/elixir:1.17.0-erlang-27.0-alpine-3.19.1
#5 ...

#6 [internal] load metadata for docker.io/library/alpine:3.19.1
#6 DONE 0.3s

#5 [internal] load metadata for docker.io/hexpm/elixir:1.17.0-erlang-27.0-alpine-3.19.1
#5 DONE 0.3s

#7 [internal] load .dockerignore
#7 transferring context: 70B 0.1s
#7 transferring context: 322B 0.3s done
#7 DONE 0.3s

#8 [app 1/4] FROM docker.io/library/alpine:3.19.1@sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b
#8 resolve docker.io/library/alpine:3.19.1@sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b done
#8 DONE 0.0s

#9 [build  1/12] FROM docker.io/hexpm/elixir:1.17.0-erlang-27.0-alpine-3.19.1@sha256:87814372556a694f56ae3f86f4da945b112a40a60b34e7d68c709715cc6878ce
#9 resolve docker.io/hexpm/elixir:1.17.0-erlang-27.0-alpine-3.19.1@sha256:87814372556a694f56ae3f86f4da945b112a40a60b34e7d68c709715cc6878ce done
#9 DONE 0.0s

#10 [internal] load build context
#10 transferring context: 26.18kB 0.3s done
#10 DONE 0.3s

#11 [build  4/12] RUN mix local.hex --force &&     mix local.rebar --force
#11 CACHED

#12 [build  2/12] RUN apk add --no-cache build-base git npm curl python3
#12 CACHED

#13 [build  5/12] COPY mix.exs mix.lock ./
#13 CACHED

#14 [build  6/12] COPY config config
#14 CACHED

#15 [build  3/12] WORKDIR /app
#15 CACHED

#16 [build  7/12] RUN mix deps.get --only prod &&     mix deps.compile
#16 CACHED

#17 [build  8/12] COPY lib lib
#17 DONE 0.0s

#18 [build  9/12] COPY priv priv
#18 DONE 0.0s

#19 [build 10/12] COPY assets assets
#19 DONE 0.0s

#20 [build 11/12] RUN mix assets.deploy
#20 1.198 
#20 1.198 16:19:35.971 [debug] Downloading tailwind from https://github.com/tailwindlabs/tailwindcss/releases/download/v3.4.3/tailwindcss-linux-x64
#20 3.816 
#20 3.816 Rebuilding...
#20 4.349 
#20 4.350 Done in 593ms.
#20 4.412 
#20 4.412 16:19:39.186 [debug] Downloading esbuild from https://registry.npmjs.org/@esbuild/linux-x64/0.17.11
#20 4.871 
#20 4.871   ../priv/static/assets/app.js  130.5kb
#20 4.871 
#20 4.871 âš¡ Done in 35ms
#20 4.925 Compiling 19 files (.ex)
#20 6.066 Generated drag_n_stamp app
#20 6.549 Check your digested files at "priv/static"
#20 DONE 7.0s

#21 [build 12/12] RUN mix release --overwrite
#21 0.971 * assembling drag_n_stamp-0.1.0 on MIX_ENV=prod
#21 0.973 * using config/runtime.exs to configure the release at runtime
#21 1.311 * skipping elixir.bat for windows (bin/elixir.bat not found in the Elixir installation)
#21 1.312 * skipping iex.bat for windows (bin/iex.bat not found in the Elixir installation)
#21 1.956 
#21 1.956 Release created at _build/prod/rel/drag_n_stamp
#21 1.956 
#21 1.956     # To start your system
#21 1.956     _build/prod/rel/drag_n_stamp/bin/drag_n_stamp start
#21 1.956 
#21 1.956 Once the release is running:
#21 1.956 
#21 1.956     # To connect to it remotely
#21 1.956     _build/prod/rel/drag_n_stamp/bin/drag_n_stamp remote
#21 1.956 
#21 1.956     # To stop it gracefully (you may also send SIGINT/SIGTERM)
#21 1.956     _build/prod/rel/drag_n_stamp/bin/drag_n_stamp stop
#21 1.956 
#21 1.956 To list all commands:
#21 1.956 
#21 1.956     _build/prod/rel/drag_n_stamp/bin/drag_n_stamp
#21 1.956 
#21 DONE 5.4s

#22 [app 2/4] RUN apk add --no-cache libstdc++ openssl ncurses-libs
#22 CACHED

#23 [app 3/4] WORKDIR /app
#23 CACHED

#24 [app 4/4] COPY --from=build /app/_build/prod/rel/drag_n_stamp ./
#24 DONE 3.4s

#25 exporting to image
#25 exporting layers
#25 exporting layers 0.4s done
#25 exporting manifest sha256:5a2fb78ac05e9e251fdd5c3aa95e7b72510f8617563487e78c6459eac01b49bb done
#25 exporting config sha256:b45ed9344692d28efa686044cfa16210911fc8538b8ea7ec13910e18992fa9fc done
#25 pushing layers for registry.fly.io/drag-n-stamp-dev:deployment-01K2WD7XG1VY9CH94TAH39GJ5A@sha256:5a2fb78ac05e9e251fdd5c3aa95e7b72510f8617563487e78c6459eac01b49bb
#25 pushing layer sha256:9d3acd0d676d103d543c76c8960db44eb93db8e43e92125f0aa4b2f312ee2570
#25 pushing layer sha256:4abcf20661432fb2d719aaf90656f55c287f8ca915dc1c92ec14ff61e67fbaf8
#25 pushing layer sha256:98e3fcee03681932ca37243282ba3e73df2d4cd9d09394de5650a3e2ca191795
#25 pushing layer sha256:b45ed9344692d28efa686044cfa16210911fc8538b8ea7ec13910e18992fa9fc
#25 pushing layer sha256:e95c742d462c0072a5dc8442bf02d2dbdc6bc0f52575125014497f7fad888c75
#25 pushing layer sha256:4abcf20661432fb2d719aaf90656f55c287f8ca915dc1c92ec14ff61e67fbaf8 0.7s done
#25 pushing layer sha256:98e3fcee03681932ca37243282ba3e73df2d4cd9d09394de5650a3e2ca191795 1.9s done
#25 pushing layer sha256:e95c742d462c0072a5dc8442bf02d2dbdc6bc0f52575125014497f7fad888c75 2.1s done
#25 pushing layer sha256:b45ed9344692d28efa686044cfa16210911fc8538b8ea7ec13910e18992fa9fc 3.6s done
#25 pushing layers for registry.fly.io/drag-n-stamp-dev:deployment-01K2WD7XG1VY9CH94TAH39GJ5A@sha256:5a2fb78ac05e9e251fdd5c3aa95e7b72510f8617563487e78c6459eac01b49bb 5.1s done
#25 pushing layer sha256:9d3acd0d676d103d543c76c8960db44eb93db8e43e92125f0aa4b2f312ee2570 5.1s done
#25 pushing manifest for registry.fly.io/drag-n-stamp-dev:deployment-01K2WD7XG1VY9CH94TAH39GJ5A@sha256:5a2fb78ac05e9e251fdd5c3aa95e7b72510f8617563487e78c6459eac01b49bb
#25 pushing manifest for registry.fly.io/drag-n-stamp-dev:deployment-01K2WD7XG1VY9CH94TAH39GJ5A@sha256:5a2fb78ac05e9e251fdd5c3aa95e7b72510f8617563487e78c6459eac01b49bb 0.9s done
#25 DONE 6.4s
--> Build Summary:  (â€‹)
[38;5;252m--> Building image done[0m
image: registry.fly.io/drag-n-stamp-dev:deployment-01K2WD7XG1VY9CH94TAH39GJ5A
image size: 19 MB

Watch your deployment at https://fly.io/apps/drag-n-stamp-dev/monitoring

Running drag-n-stamp-dev release_command: eval "DragNStamp.Release.migrate()"
> Created release_command machine d896015b4d99d8
> Waiting for d896015b4d99d8 to have state: stopped
> Machine d896015b4d99d8 has state: stopped
Starting machine
> Waiting for d896015b4d99d8 to have state: started
> Waiting for d896015b4d99d8 to have state: started
> Machine d896015b4d99d8 has state: started
> Waiting for d896015b4d99d8 to have state: destroyed
> Machine d896015b4d99d8 has state: destroyed
> Waiting for d896015b4d99d8 to get exit event
âœ” release_command d896015b4d99d8 completed successfully
Updating existing machines in 'drag-n-stamp-dev' with rolling strategy
> [1/2] Acquiring lease for 48e4253f721d68
> [1/2] Acquired lease for 48e4253f721d68
> [2/2] Acquiring lease for 286075dce9d538
> [2/2] Acquired lease for 286075dce9d538
> [1/2] Updating machine config for 48e4253f721d68
> [1/2] Updating 48e4253f721d68 [app]
> [1/2] Updated machine config for 48e4253f721d68
> [1/2] Waiting for machine 48e4253f721d68 to reach a good state
> [1/2] Machine 48e4253f721d68 reached started state

WARNING The app is not listening on the expected address and will not be reachable by fly-proxy.
You can fix this by configuring your app to listen on the following addresses:
  - 0.0.0.0:4000
Found these processes inside the machine with open listening sockets:
  PROCESS                         | ADDRESSES                             
----------------------------------*---------------------------------------
  /.fly/hallpass                  | [fdaa:d:cdb2:a7b:4b9:8bcb:3ea1:2]:22  
  /app/erts-15.0/bin/epmd -daemon | 0.0.0.0:4369, [::]:4369               

> [1/2] Running smoke checks on machine 48e4253f721d68
> [1/2] Running machine checks on machine 48e4253f721d68
> [1/2] Checking health of machine 48e4253f721d68
âœ” [1/2] Machine 48e4253f721d68 is now in a good state
> [2/2] Updating machine config for 286075dce9d538
> [2/2] Updating 286075dce9d538 [app]
> [2/2] Updated machine config for 286075dce9d538
> [2/2] Waiting for machine 286075dce9d538 to reach a good state
> [2/2] Machine 286075dce9d538 reached started state
> [2/2] Running smoke checks on machine 286075dce9d538
> [2/2] Running machine checks on machine 286075dce9d538
> [2/2] Checking health of machine 286075dce9d538
âœ” [2/2] Machine 286075dce9d538 is now in a good state
> [2/2] Clearing lease for 286075dce9d538
> [1/2] Clearing lease for 48e4253f721d68
âœ” [1/2] Cleared lease for 48e4253f721d68
âœ” [2/2] Cleared lease for 286075dce9d538
Checking DNS configuration for drag-n-stamp-dev.fly.dev

Visit your newly deployed app at https://drag-n-stamp-dev.fly.dev/
